From b970d34b68144b55e55f831de3f087afc9c170d0 Mon Sep 17 00:00:00 2001
From: Jackie Huang <jackie.huang@windriver.com>
Date: Mon, 28 Oct 2024 07:12:54 +0000
Subject: [PATCH] intel-ice: use linux common header for kcompat-generator.sh

For debian, there are two header pkgs: linux-headers-5.10.0-6-amd64
and linux-headers-5.10.0-6-common. kcompat-generator.sh needs
header files in linux-headers-5.10.0-6-common instead of
linux-headers-5.10.0-6-amd64.

Signed-off-by: Jackie Huang <jackie.huang@windriver.com>
---
 src/common.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/common.mk b/src/common.mk
index 1a31c76..90d318f 100644
--- a/src/common.mk
+++ b/src/common.mk
@@ -320,7 +320,7 @@ minimum_kver_check = $(eval $(call _minimum_kver_check,${1},${2},${3}))
 # call script that populates defines automatically
 $(if $(shell \
     $(if $(findstring 1,${V}),,QUIET_COMPAT=1) \
-    KSRC=${KSRC} OUT=${src}/kcompat_generated_defs.h CONFIG_FILE=${CONFIG_FILE} \
+    KSRC=${KSRC_COMMON} OUT=${src}/kcompat_generated_defs.h CONFIG_FILE=${CONFIG_FILE} \
     bash ${src}/kcompat-generator.sh && echo ok), , $(error kcompat-generator.sh failed))
 
 ################
-- 
2.25.1

